@startuml
!include style.puml

box Logic LOGIC_COLOR_T1
participant ":LogicManager" as LogicManager LOGIC_COLOR
participant ":AddressBookParser" as AddressBookParser LOGIC_COLOR
participant ":AddProcCommandParser" as AddProcCommandParser LOGIC_COLOR
participant "d:AddProcCommand" as AddProcCommand LOGIC_COLOR
end box

box Model MODEL_COLOR_T1
participant "p:Procedure" as Procedure MODEL_COLOR
participant ":ModelManager" as ModelManager MODEL_COLOR
participant ":Client" as Client MODEL_COLOR
participant "AddressBook" as AddressBook MODEL_COLOR
end box


[-> LogicManager : execute('procedure')
activate LogicManager

LogicManager -> AddressBookParser : parseCommand('procedure')
note left
('procedure') is defined as
"addProc 1 i/Install modem
c/10.5 d/20/03/2022 11:30"
end note
activate AddressBookParser

create AddProcCommandParser
AddressBookParser -> AddProcCommandParser
activate AddProcCommandParser

AddProcCommandParser --> AddressBookParser
deactivate AddProcCommandParser

AddressBookParser -> AddProcCommandParser : parse("addProc")
activate AddProcCommandParser

create Procedure
AddProcCommandParser -> Procedure : parse(args)
note left
(args) is defined as
 i/Install modem
 c/10.5
 d/20/03/2022
 11:30
end note

activate Procedure
Procedure --> AddProcCommandParser
deactivate Procedure

AddProcCommandParser --> AddressBookParser
deactivate AddProcCommandParser
'Hidden arrow to position the destroy marker below the end of the activation bar.
AddProcCommandParser -[hidden]-> AddressBookParser


AddressBookParser --> LogicManager : p
deactivate AddressBookParser

LogicManager -> AddProcCommand : execute()
activate AddProcCommand

AddProcCommand -> ModelManager : getFilteredClientList()
activate ModelManager

ModelManager --> AddProcCommand : lastShownList
deactivate ModelManager

AddProcCommand -> AddProcCommand : addClientProcedure(clientToEdit)
activate AddProcCommand


AddProcCommand -> Client : get(info)
activate Client
note left
info represents
Name, Phone, Email,
Plans, Tags, Address
and Procedures
end note
Client --> AddProcCommand : info
deactivate Client

AddProcCommand -> AddProcCommand : addProcedure(procedureList)
activate AddProcCommand
AddProcCommand --> AddProcCommand
deactivate AddProcCommand
AddProcCommand --> AddProcCommand
deactivate AddProcCommand
AddProcCommand -> ModelManager : setClient(clientToEdit, editedClient)


activate ModelManager

ModelManager -> AddressBook : setClient(target, editedClient)
activate AddressBook
deactivate AddressBook

AddProcCommand -> ModelManager : updatedFilteredClientList(PREDICATE_SHOW_ALL_CLIENTS)
deactivate ModelManager
AddProcCommand --> AddProcCommandParser
AddProcCommandParser --> AddressBookParser
AddressBookParser --> LogicManager
deactivate AddProcCommand

[<--LogicManager
deactivate LogicManager
@enduml
